for(var palette={lightgray:"#819090",gray:"#708284",mediumgray:"#536870",darkgray:"#475B62",darkblue:"#0A2933",darkerblue:"#042029",paleryellow:"#FCF4DC",paleyellow:"#EAE3CB",yellow:"#A57706",orange:"#BD3613",red:"#D11C24",pink:"#C61C6F",purple:"#595AB7",blue:"#2176C7",green:"#259286",yellowgreen:"#738A05"},width=900,height=400,circleWidth=10,nodes=[{name:"parent"},{name:"child1"},{name:"child2",target:[0]},{name:"child3",target:[0]},{name:"child4",target:[1]},{name:"child5",target:[1,1,0]}],links=[],i=0;i<nodes.length;i++)if(void 0!==nodes[i].target)for(var x=0;x<nodes[i].target.length;x++)links.push({source:nodes[i],target:nodes[nodes[i].target[x]]});console.log(links);var myChart=d3.select("#chart").append("svg").attr("width",width).attr("height",height),force=d3.layout.force().nodes(nodes).links([]).gravity(.5).charge(-5e3).size([width,height]),link=myChart.selectAll("line").data(links).enter().append("line").attr("stroke",palette.gray),node=myChart.selectAll("circle").data(nodes).enter().append("g").call(force.drag);node.append("circle").attr("cx",function(a){return a.x}).attr("cy",function(a){return a.y}).attr("r",circleWidth).attr("fill",function(a,b){return b>0?palette.blue:palette.pink}),node.append("text").text(function(a){return a.name}).attr("font-family","Arial").attr("fill",function(a,b){return b>0?palette.mediumgray:palette.yellowgreen}).attr("x",function(a,b){return b>0?circleWidth+5:circleWidth-25}).attr("y",function(a,b){return b>0?circleWidth:8}).attr("text-anchor",function(a,b){return b>0?"beginning":"end"}).attr("font-size",function(a,b){return b>0?"1em":"1.8em"}),force.on("tick",function(){node.attr("transform",function(a){return"translate("+a.x+", "+a.y+")"}),link.attr("x1",function(a){return a.source.x}).attr("y1",function(a){return a.source.y}).attr("x2",function(a){return a.target.x}).attr("y2",function(a){return a.target.y})}),force.start();